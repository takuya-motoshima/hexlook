"use strict";module.exports=function(e,t={}){function i(){const e=o("0",p.toString(16),r.offsetWidth);c=o(" ",e,r.offsetGutter)+r.offsetSep}function n(){if(!c.length)return;let e=h%r.blockSize;if(0!==e||0===p&&r.nullAscii){e=r.blockSize-e;for(let t=0;t<e;t++)f(r.emptyHex,r.emptyAscii)}c+=u+"  "+r.asciiSep+l+r.asciiSep,s.push(c),c="",u="",l=""}function f(e,t,i){const n=h%r.blockSize==0,f=h%r.hexGroup==0;!n&&f&&(u+=r.hexSep),u+=e,l+=t,p++,h++}function o(e,t,i){for(;t.length<i;)t=e+t;return t}if("string"==typeof e)e=Buffer.from(e);else if(!Buffer.isBuffer(e))throw new Error("payload is unknown");t.offsetWidth||(t.offsetWidth=2*Math.ceil(e.length.toString(16).length/2));let r=Object.assign({blockSize:16,hexGroup:2,offsetGutter:0,hexSep:" ",offsetSep:": ",asciiSep:"|",emptyHex:"  ",emptyAscii:"",nullAscii:"",offsetWidth:8,renderHex:function(e){return o("0",e.toString(16),2)},renderAscii:function(e){return e>31&&e<127?String.fromCharCode(e):"."}},t);r.offsetGutter=Math.max(r.offsetWidth,r.offsetGutter);let s=[],c="",u="",l="",h=0,p=0;for(let t=0;t<e.length;t++){h%r.blockSize==0&&(n(),i());const o=e[t];f(r.renderHex(o),r.renderAscii(o),e[t])}return 0===p&&r.nullAscii&&(i(),l+=r.nullAscii),n(),s.join("\n")};
